import e,{useState as t,useEffect as n,useContext as i}from"react";import r from"@auth0/auth0-spa-js";var o=function(e){try{return Promise.resolve(e.getUser())}catch(e){return Promise.reject(e)}},c=function(e){window.history.replaceState({},document.title,e&&e.targetUrl?e.targetUrl:window.location.pathname)},u={name:"",picture:"",updated_at:"",email:"",email_verified:!1,sub:""},a=e.createContext({isAuthenticated:!1,isProcessing:!1,user:u,handleRedirectCallback:function(){},loginWithRedirect:function(e){},getTokenSilently:function(){return Promise.resolve("")},logout:function(){}}),l=function(){return i(a)},s=function(i){var l=i.children,s=i.onRedirectCallback;void 0===s&&(s=c);var d=i.client_id,h=i.domain,f=i.audience,m=t(!1),v=m[0],g=m[1],P=t(u),w=P[0],p=P[1],k=t(),y=k[0],R=k[1],A=t(!0),b=A[0],j=A[1];return n(function(){!function(){try{Promise.resolve(r({domain:h,client_id:d,audience:f})).then(function(e){function t(){return Promise.resolve(e.isAuthenticated()).then(function(t){function n(){j(!1)}g(t);var i=function(){if(t)return Promise.resolve(o(e)).then(function(e){p(e)})}();return i&&i.then?i.then(n):n()})}R(e);var n=function(){if(window.location.search.includes("code="))return Promise.resolve(e.handleRedirectCallback()).then(function(e){s(e.appState)})}();return n&&n.then?n.then(t):t()})}catch(e){return Promise.reject(e)}}()},[]),e.createElement(a.Provider,{value:{isAuthenticated:v,user:w,isProcessing:b,handleRedirectCallback:function(){try{var e=function(){if(y)return j(!0),Promise.resolve(o(y)).then(function(e){j(!1),g(!0),p(e)})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},loginWithRedirect:function(e){if(!y)throw new Error("Auth0 not initialized");y.loginWithRedirect(e)},getTokenSilently:function(){return y?y.getTokenSilently():Promise.reject("Auth0 not initialized")},logout:function(){if(!y)throw new Error("Auth0 not initialized");y.logout({returnTo:""+window.location.origin})}}},l)};export{a as AuthContext,l as useAuth,s as AuthProvider};
//# sourceMappingURL=index.module.js.map
